# 실행 및 Internal Server Error 해결 가이드

## 1. 오류가 나는 이유 (설정 문제가 아닙니다)

- **당신 PC 설정이 잘못된 것이 아닙니다.**  
  많은 Windows + Node.js 환경에서 흔히 나는 현상입니다.

- **원인 요약**
  1. **프로젝트 경로에 한글이 포함됨**  
     지금 경로: `C:\Users\yhs17\OneDrive\Desktop\마케팅사 홈페이지`  
     → Node.js/Next.js가 `.next` 폴더 안의 파일(예: `layout.js`)을 열 때, Windows에서 한글 경로 처리 문제로 `UNKNOWN` 오류가 발생할 수 있습니다.
  2. **OneDrive 동기화 폴더**  
     바탕화면(Desktop)이 OneDrive와 연동되어 있으면, 해당 폴더 안의 파일이 동기화·잠금 상태가 되면서 같은 오류가 더 자주 납니다.

- **증상**
  - 메인(`/`)은 뜨는데, **뷰티/의료, F&B/로컬, 커머스/온라인** 등 다른 메뉴를 누르면  
    `Internal Server Error` 또는 터미널에  
    `UNKNOWN: unknown error, open '...\\.next\\static\\chunks\\app\\layout.js'`  
    가 반복해서 나옵니다.

---

## 2. 해결 방법 (순서대로 시도)

### 방법 A: `start.bat`으로 실행 (가장 먼저 시도)

**중요:**  
`npm run dev`를 **PowerShell/명령 프롬프트에서 직접 실행하면 안 됩니다.**  
한글 경로 그대로 실행되기 때문에 같은 오류가 다시 납니다.

1. **PowerShell/터미널은 모두 닫습니다.**
2. **파일 탐색기**에서 프로젝트 폴더(`마케팅사 홈페이지`)를 엽니다.
3. **`start.bat`** 파일을 **더블클릭**해서 실행합니다.
4. 검은 창이 뜨면서  
   `프로젝트 폴더를 M: 로 연결합니다`  
   같은 메시지가 나오고, 이어서 개발 서버가 실행됩니다.
5. 브라우저에서 **http://localhost:3000** (또는 창에 안내된 주소)로 접속한 뒤,  
   **뷰티/의료** 등 다른 메뉴를 눌러 봅니다.

- `start.bat`은 프로젝트 폴더를 **M:** 드라이브로 잠깐 연결한 뒤, 그 경로에서 서버를 띄우기 때문에 한글 경로로 인한 오류를 피할 수 있습니다.
- 그래도 오류가 나면 **방법 B**로 진행합니다.

---

### 방법 B: 프로젝트를 영문 경로로 복사해서 실행 (가장 확실)

한글과 OneDrive를 모두 피하려면, **프로젝트 전체를 영문만 있는 경로로 복사**한 뒤 그곳에서 실행하는 것이 가장 확실합니다.

#### 1단계: 영문 폴더 만들기

1. **파일 탐색기**를 엽니다.
2. 예를 들어 아래 중 하나로 폴더를 만듭니다.  
   (이미 있다면 그대로 사용해도 됩니다.)
   - `C:\dev`
   - `C:\projects`
   - `C:\Users\yhs17\dev`
3. 그 안에 **새 폴더**를 하나 만듭니다.  
   이름은 **영문만** 사용합니다.  
   예: `marketing-site`  
   → 최종 경로 예: `C:\dev\marketing-site`

#### 2단계: 프로젝트 복사

1. 현재 프로젝트 폴더  
   `C:\Users\yhs17\OneDrive\Desktop\마케팅사 홈페이지`  
   를 엽니다.
2. **안에 있는 모든 파일·폴더**를 선택합니다.  
   (Ctrl+A)  
   단, **`node_modules`** 폴더와 **`.next`** 폴더는 **선택에서 제외**하는 것이 좋습니다.  
   (복사해도 되지만, 나중에 새로 `npm install` 할 예정이면 제외해도 됩니다.)
3. 방금 만든 영문 폴더(예: `C:\dev\marketing-site`)에 **붙여넣기** 합니다.

#### 3단계: 새 경로에서 서버 실행

1. **PowerShell** 또는 **명령 프롬프트**를 엽니다.
2. 아래처럼 **영문 경로로 이동**한 뒤, 설치와 실행을 합니다.

```powershell
cd C:\dev\marketing-site
```

(본인이 만든 경로로 바꿔서 입력합니다.)

3. 의존성 설치 (처음 한 번만):

```powershell
npm install
```

4. 개발 서버 실행:

```powershell
npm run dev
```

5. 터미널에 나오는 주소(예: http://localhost:3000)로 브라우저에서 접속한 뒤,  
   **뷰티/의료**, **F&B/로컬**, **커머스/온라인**을 눌러 봅니다.

- 이렇게 하면 경로에 한글이 없고, OneDrive 바탕화면이 아닌 보통 드라이브(예: C:\dev)에서 실행되므로 `layout.js` 오류가 거의 나지 않습니다.

---

### 방법 C: OneDrive만 피하고 싶을 때

- 프로젝트는 **그대로 한글 경로**에 두고, **OneDrive 동기화만** 피하고 싶다면:
  1. OneDrive 설정에서 **해당 폴더(예: 바탕화면) 동기화 제외**를 하거나,
  2. 아니면 위 **방법 B**처럼 **C:\dev** 같은 OneDrive가 아닌 영문 경로로 복사해 두고, 앞으로는 그 복사본만 사용하는 것을 권장합니다.

---

## 3. 정리: 당신이 할 일

| 상황 | 할 일 |
|------|--------|
| 아직 `start.bat`을 안 써봤다 | 터미널 끄고, **`start.bat` 더블클릭** → 브라우저에서 http://localhost:3000 접속 후 메뉴 클릭 테스트 |
| `start.bat` 썼는데도 같은 오류 | **방법 B**대로 **영문 경로(예: C:\dev\marketing-site)** 에 프로젝트 복사 → 그 폴더에서 `npm install` 후 `npm run dev` |
| 앞으로 개발할 폴더를 정하고 싶다 | 처음부터 **C:\dev\marketing-site** 같은 영문 경로에 프로젝트를 두고, 그곳에서만 `npm run dev` 사용 권장 |

---

## 4. 참고: 터미널에 나오는 다른 메시지

- **Port 3000 is in use, trying 3001 instead**  
  → 이미 3000 포트를 쓰는 프로그램이 있어서 3001(또는 3002)로 바뀐 것입니다.  
  브라우저에는 **실제 안내된 주소**(예: http://localhost:3002)로 접속하면 됩니다.
- **AnimatePresence ... mode is set to "wait"**  
  → 애니메이션 라이브러리 경고로, 화면이 안 뜨는 오류와는 무관합니다.  
  코드 쪽에서 수정해 두었습니다.

이 가이드대로 하면 **뷰티/의료 등 버튼이 정상 동작**해야 합니다.  
가장 확실한 방법은 **영문 경로로 복사 후 실행(방법 B)** 입니다.
